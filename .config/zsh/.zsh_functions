#!/usr/bin/env zsh

cf() { rg --files ~/.config --type zshrc --type sh --type vim | fzf | xargs -r $EDITOR ;}

sf() { rg --files /repo/$USER/scripts ~/.scripts --type sh --type py | fzf | tr -d '\n' | xclip -selection clipboard ;}

ff() { rg --vimgrep "$0" | fzf }

lc_rec () {
    export LANGUAGE=en_US.UTF-8
    export LANG=en_US.UTF-8
    export LC_ALL=en_US.UTF-8
}

prep_dev () { 
    source $DEV_SDK && unset PYTHONHOME 
    export CONF_SDK_FLAGS='--target=arm-wrs-linux-gnueabi \
        --host=arm-wrs-linux-gnueabi \
        --build=x86_64-linux \
        --with-libtool-sysroot=$SDKTARGETSYSROOT'
}


prep_latest() { source /proj/bidaas1/installed_sdk/air6449-nr-applic/env.sh && unset PYTHONHOME }     

z_refresh () { source $ZDOTDIR/.zshrc.user }

_brew_lazy_load () {
    if [ -x "$HOMEBREW_PREFIX/bin/brew" ]; then
        eval "$("$HOMEBREW_PREFIX/bin/brew" shellenv)"
    fi
}

# find-in-file - usage: fif <SEARCH_TERM>
fif() {
    [ ! "$#" -gt 0 ] && echo "No arguments!!" && return 1
    rg "$1" "$2" --vimgrep --color ansi | fzf --ansi \
        --preview "rg --smart-case --pretty --context 10 '$1' {}"
}

mlf () {
    [ ! "$#" -gt 0 ] && echo "No arguments!!" && return 1
    module --color=auto avail "$1" | fzf 
}

function cpr() {
  rsync --archive -hh --partial --info=stats1 --info=progress2 --modify-window=1 "$@"
} 

function mvr() {
  rsync --archive -hh --partial --info=stats1 --info=progress2 --modify-window=1 --remove-source-files "$@"
}

function _env_reset() {
    _brew_lazy_load 
    module restore batteries_included
}
